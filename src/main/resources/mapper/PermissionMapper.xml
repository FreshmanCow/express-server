<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "<http://mybatis.org/dtd/mybatis-3-mapper.dtd>">
<mapper namespace="com.bobby.securityjwt.mapper.PermissionMapper">

    <!--    多表链接查询-->
    <select id="getPermissionsByRoleName" resultType="com.bobby.securityjwt.entity.dto.PermissionDto">
        select permission.id as permission_id, role.id as role_id, role.name as role_name, permission.domain,
        permission.permission
        from permission, role
        <where>
            <if test="roleName != null and roleName !='' ">
                role.name = #{roleName} and permission.role_id = role.id
            </if>
        </where>
    </select>

    <select id="getPermissionByRoleId" resultType="com.bobby.securityjwt.entity.dto.PermissionDto">
        select permission.id as permission_id, role.id as role_id, role.name as role_name, permission.domain,
        permission.permission
        from permission, role
        <where>
            <if test="roleId != null">
                permission.role_id=#{roleId}
            </if>
        </where>
    </select>

</mapper>